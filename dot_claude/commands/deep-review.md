---
description: 深層コードレビュー
---

# 深層コードレビュー

ステージされた変更に対して、複数の専門エージェントによる包括的なレビューを実施します。

## 手順

### 1. ステージ変更の取得
```bash
git diff --cached
```

### 2. 専門エージェントへの委譲

以下のエージェントを**並列で**起動し、それぞれの観点から分析を委譲する:

| エージェント | 観点 | ファイル |
|-------------|------|----------|
| セキュリティレビューア | 脆弱性、OWASP Top 10 | `agents/reviewer/security.md` |
| パフォーマンスレビューア | 計算量、ボトルネック | `agents/reviewer/performance.md` |
| アーキテクチャレビューア | 設計、依存関係、構造 | `agents/reviewer/architecture.md` |
| 保守性レビューア | 可読性、複雑度、負債 | `agents/reviewer/maintainability.md` |

**委譲方法**: Taskツールを使用し、各エージェントのプロンプトを読み込んで並列実行する。

### 3. 結果の統合

各エージェントからのフィードバックを収集し、統合レビューとして出力する。

## 出力形式

```
## 深層レビュー結果

### 総合評価
[Approve / Request Changes / Comment]
[全体的な品質サマリー（1-2文）]

---

### セキュリティ
**リスクレベル**: [重大/高/中/低/なし]
[主要な発見事項と推奨事項]

### パフォーマンス
**影響度**: [重大/高/中/低/なし]
[主要な発見事項と推奨事項]

### アーキテクチャ
**評価**: [優秀/良好/要改善/問題あり]
[主要な発見事項と推奨事項]

### 保守性
**評価**: [優秀/良好/要改善/問題あり]
[主要な発見事項と推奨事項]

---

### 優先アクション
1. [最も重要な改善点]
2. [次に重要な改善点]
3. [その他の提案]

### 良い点
- [評価できる実装や設計]
```

## ガイドライン

- 各エージェントの分析は並列で実行し、効率化を図る
- 発見事項は重複を排除し、優先度順に整理する
- 具体的なファイル名と行番号を含める
- 批判だけでなく、良い点も明示する
- 変更の規模に応じてレビューの深さを調整する

$ARGUMENTS
